<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>MobileApp</title> 
	<link rel="apple-touch-icon" href="icones/const_517x517.png"/>
	
	<meta name="viewport" content="width=device-width, initial-scale=1"> 

	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	<script src="http://code.angularjs.org/angular-1.0.1.min.js"></script>

<script>
var employes=[];

function DataCtrl($scope)
{
    $.ajax(
            {
  				 url: 'http://backplane.cloudfoundry.com/api/employe/',
                // isLocal: false,
                async: false,
                dataType: 'json',
                crossDomain: true,
                success: function (i)
                {
                $scope.employes = i;
                employes=i;
                },
                error: function (jqXHR,textStatus,errorThrown)
                {
                    console.log("fail ",jqXHR);
                    console.log("status ",textStatus);
                    console.log("err ",errorThrown);
                }
              } // fin argument ajax
          );//Fin Ajax
}//Fin DataCtrl

function InspectionCtrl($scope) 
{
	$.ajax(
			{
				url: 'http://backplane.cloudfoundry.com/inspection/tous',
				// isLocal: false, 
				async: false,
				dataType: 'json',
				crossDomain: true,
				success: function (i) 
				{
				$scope.inspections = i;
				},
				error: function (jqXHR,textStatus,errorThrown) 
				{
					console.log("fail ",jqXHR);
					console.log("status ",textStatus);
					console.log("err ",errorThrown);
				}
	  		} // fin argument ajax
	  	);//Fin Ajax
}//Fin DataCtrl


//--- PAGE 

function showDetail( urlObj, options )
{
	
	var detailName = urlObj.hash.replace( /.*id=/, "" ),

	  //  id =   employes.data[ detailName ],

		pageSelector = urlObj.hash.replace( /\?.*$/, "" );

	if ( detailName ) {
		// Get the page we are going to dump our content into.
		var $page = $( pageSelector ),

			// Get the header for the page.
			$header = $page.children( ":jqmData(role=header)" ),

			// Get the content area element for the page.
			$content = $page.children( ":jqmData(role=content)" ),

			// The markup we are going to inject into the content
			// area of the page.
	markup = "<p>" + detailName + "</p><ul data-role='listview' data-inset='true'>";


		$header.find( "h1" ).html( "Fiche d'employe" );

		$content.html( markup );

		$page.page();

		$content.find( ":jqmData(role=listview)" ).listview();

		options.dataUrl = urlObj.href;

		$.mobile.changePage( $page, options );
	}
}

$(document).bind( "pagebeforechange", function( e, data ) {

	if ( typeof data.toPage === "string" ) {
		// category.

		var u = $.mobile.path.parseUrl( data.toPage ),
			re = /^#employeDetail/;

		if ( u.hash.search(re) !== -1 ) {
			showDetail( u, data.options );

			e.preventDefault();
		}
	}
});


//----END PAGE

</script>

<style>
progress, span.progress{
  width:40%;
}
span.progress{
  border:1px solid black;
  height:22px;
  display:inline-block;
}
span.progVal {
  	height:22px;
	display:inline-block;
	background-color:#6D6E8A ;
}

span.nom {
	width:30%;
	display:inline-block;}

span.inspPrevues, span.inspDelta {
	width:5%;
	display:inline-block;
	text-align: right;}

span.inspPrevues {
	padding-left:10%;}
	
span[value^="-"] {
	color:red;}

ul.unstyled li {
	list-style: none;}
</style>

</head>
<body ng-app> 

<!-- Start of first page -->
<div data-role="page" id="suivi">

	<div data-role="header"  data-position="fixed">
		<h1>Suivi des inspections</h1>

		
	</div><!-- /header -->

	<div data-role="content">	
		<div ng-controller="DataCtrl">
   			<ul data-role="listview" data-divider-theme="b" data-inset="true">
   				<div class="ui-grid-a" >
              	  <div class="ui-block-a" >
                    <fieldset data-role="controlgroup" data-mini="true">
                  
                        <input name="recherche" id="searchinput1" placeholder="Taper ici" value="" type="search" />
                    </fieldset>
                    </div>
                    	 <div class="ui-block-b" align="right">
                    <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" >
                        <input id="Tout" name="" value="Tout" type="button" />              
                        <input id="Retard" name="" value="Retard" type="button" />         
                        <input id="Complete" name="" value="Completé" type="button" />
     
                    </fieldset>
                     </div>
                </div>
      			<li ng-repeat="stat in employes.data" data-theme="c">
	        		<a href="#employeDetail?id={{stat.id}}" data-transition="slide">
		      			<span class=nom> {{stat.nom}}</span>
		        		<span class=inspDelta>
		        			<span class="ui-li-count">{{stat.inspDelta}}</span>
		        		</span>
	       			</a>
     			 </li>
    		</ul>
 		 </div>
	</div><!-- /content -->

	<div data-role="footer" data-position="fixed">		
		<div data-role="navbar"  >
			<ul>
				<li><a href="#suivi" data-icon="home"  class="ui-btn-active ui-state-persist"  >Accueil</a></li>
				<li><a href="#config" data-icon="gear">Configuration</a></li>
			</ul>
		</div><!-- /navbar -->
	</div><!-- /footer -->
</div><!-- /page -->


<!-- Start of second page -->
<div data-role="page" id="config">

	<div data-role="header"  data-position="fixed">
		<h1>Configuration</h1>

	</div><!-- /header -->

	<div data-role="content">	
  
	</div><!-- /content -->

		<div data-role="footer" data-position="fixed">		
		<div data-role="navbar"  >
			<ul>
				<li><a href="#suivi" data-icon="home"   >Accueil</a></li>
				<li><a href="#config" data-icon="gear" class="ui-btn-active ui-state-persist">Configuration</a></li>
			</ul>
		</div><!-- /navbar -->
	</div><!-- /footer -->
</div><!-- /page -->

<!-- Start of third page -->
<!-- Début Eric Lepage -->


<div data-role="page" id="employeDetail"">

	<div data-role="collapsible" class="ui-grid-a" data-collapsed="false">
	
		<h3>Information pertinente à l'employe</h3>
		
		
		<fieldset class="ui-grid-a">
		
		<div class="ui-block-a"><label for="empl">Nom:</label></div>
		
		<div class="ui-block-b">
				<div ng-controller="DataCtrl">
					<input type="text" name="name" id="basic" value="Marie" />
				</div>
				</div>
		</fieldset>
		
	
		<fieldset class="ui-grid-a">
		
		<div class="ui-block-a"><label for="empltel" >Numéro de téléphone:</label></div>
		
		<div class="ui-block-b"><input type="tel" name="nametel" id="basic" value="514-333-4444" /></div>
		
		</fieldset>
	
	
		<fieldset class="ui-grid-a">
		
		<label for="textarea" class="ui-block-a">Remarques:</label>
		
		<textarea name="textarea" id="remarques" class="ui-block-b" value="N" /> N'est pas dispo vendredi </textarea>
		
		</fieldset>
	
	
		<fieldset class="ui-grid-a">
		
		<label for="flip-1" class="ui-block-a">Bonus ?:</label>
		
		<div class="ui-block-b"><select name="flip-1" id="bonus-1" data-role="slider" >
		
		<option value="non">Non</option>
		
		<option value="oui">Oui</option>
		
		</select> </div>
		
		</fieldset>
		
	
		<div class="ui-grid-a">
		
			<div class="ui-block-a">
			
				<div data-role="fieldcontain">
				
					<label for="radio-choice" class="ui-block-a">Statut de l'employé</label>
				
				</div>
			
			</div>
		
		<div class="ui-block-b">
		
			<div data-role="fieldcontain">
			
				<fieldset data-role="controlgroup" data-type="horizontal">
				
					<input type="radio" name="radio-choice" id="radio-choice-11" value="choice-11" check="checked" />
					
					<label for="radio-choice-11">Ext.</label>
					
					
					<input type="radio" name="radio-choice" id="radio-choice-12" value="choice-12"/>
					
					<label for="radio-choice-12">Int.</label>
					
					
					<input type="radio" name="radio-choice" id="radio-choice-13" value="choice-13"/>
					
					<label for="radio-choice-13">Temp.</label>
				
				</fieldset>
			
			</div>
		
		</div>
		
		</div>
	
		<div class="ui-grid-a">
			
			<div class="ui-block-a">
			
				<div data-role="fieldcontain">
				
					<label for="slider-2">Salaire:</label>
				
				</div> 
				
			</div>
		
			<div class="ui-block-b">
			
				<div data-role="fieldcontain">
				
					<input type="range" name="slider-2" id="salaire" value="52000" min="0" max="150000" />
				
				</div>
			
			</div>
		
		</div>
	
	<div data-role="fieldcontain">
	
		<fieldset data-role="controlgroup">
		
		<legend>Équipement:</legend>
		
		<input type="checkbox" name="checkbox-eqp" id="checkbox-eqp-1" class="custom" />
		
		<label for="checkbox-eqp-1">Casque</label>
		
		<input type="checkbox" name="checkbox-eqp" id="checkbox-eqp-2" class="custom" />
		
		<label for="checkbox-eqp-2">Lunette</label>
		
		<input type="checkbox" name="checkbox-eqp" id="checkbox-eqp-3" class="custom" />
		
		<label for="checkbox-eqp-3">Botte</label>
		
		
		</fieldset>
	
	</div>
	
	
	<div data-role="fieldcontain">
	
		<label for="select-choice-0" class="select">Territoire:</label>
		
		<select name="select-choice-0" id="select-choice-0">
		
			<option value="LAV">Laurentides</option>
			
			<option value="NOR">Montréal</option>
			
			<option value="MAT">Nord-Est</option>
			
			<option value="IDM">Réseau Autonomes</option>
			
			<option value="ORL">Montmorency</option>
			
			<option value="SEI">Richelieu</option>
		
		</select>
	
	</div>
	
	</div>
	
	
	<div data-role="collapsible">
	
	<h3>Activités</h3>
	
	<p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
	
	</div>

</div><!-- /page -->


<!-- fin eric lepage -->





</body>
</html>